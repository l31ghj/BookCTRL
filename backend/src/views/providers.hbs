<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Ebook Downloader</title>
    <style>
      body { font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; margin: 0; padding: 0; background: #0f172a; color: #e5e7eb; }
      header { background: #020617; padding: 1rem 2rem; display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid #1f2937; }
      header h1 { margin: 0; font-size: 1.1rem; letter-spacing: 0.05em; text-transform: uppercase; color: #9ca3af; }
      nav a { color: #9ca3af; margin-left: 1rem; text-decoration: none; font-size: 0.9rem; }
      nav a:hover { color: #e5e7eb; }
      main { padding: 2rem; max-width: 960px; margin: 0 auto; }
      .card { background: #020617; border-radius: 0.75rem; padding: 1.5rem; margin-bottom: 1.5rem; border: 1px solid #1f2937; box-shadow: 0 10px 30px rgba(15, 23, 42, 0.6); }
      h2 { margin-top: 0; margin-bottom: 0.5rem; font-size: 1.1rem; }
      input[type="text"], select { background: #020617; border-radius: 0.5rem; border: 1px solid #374151; padding: 0.5rem 0.75rem; color: #e5e7eb; width: 100%; }
      button { background: #4f46e5; border: none; color: white; padding: 0.5rem 1rem; border-radius: 999px; cursor: pointer; font-weight: 500; font-size: 0.9rem; }
      button.secondary { background: #111827; border: 1px solid #374151; }
      button:disabled { opacity: 0.5; cursor: default; }
      table { width: 100%; border-collapse: collapse; margin-top: 1rem; }
      th, td { padding: 0.5rem; border-bottom: 1px solid #1f2937; text-align: left; font-size: 0.85rem; }
      th { color: #9ca3af; text-transform: uppercase; letter-spacing: 0.05em; font-size: 0.75rem; }
      .tag { display: inline-flex; align-items: center; padding: 0.15rem 0.5rem; border-radius: 999px; border: 1px solid #4b5563; font-size: 0.75rem; color: #9ca3af; margin-right: 0.25rem; }
      .badge { border-radius: 999px; padding: 0.15rem 0.5rem; font-size: 0.75rem; border: 1px solid #4b5563; }
      .muted { color: #9ca3af; font-size: 0.85rem; }
      form.inline { display: inline; }
      .pill-toggle { display: inline-flex; align-items: center; gap: 0.5rem; }
      .pill-toggle span { font-size: 0.8rem; }
      .pill-toggle input { margin: 0; }
    </style>
  </head>
  <body>
    <header>
      <h1>EBOOK DOWNLOADER</h1>
      <nav>
        <a href="/search">Search</a>
        <a href="/library">Library</a>
        <a href="/settings/providers">Providers</a>
      </nav>
    </header>
    <main>

      <div class="card">
        <h2>Providers</h2>
        <p class="muted">Configure which sources are used when searching for ebooks.</p>

        <h3 style="margin-top:1rem;">Add provider</h3>
        <form method="POST" action="/settings/providers" style="display:flex; gap:0.75rem; flex-wrap:wrap; align-items:flex-end;">
          <div style="flex:1 1 160px;">
            <label class="muted">Type</label>
            <select name="type" style="width:100%;">
              {{#each types}}
              <option value="{{this.type}}">{{this.type}}</option>
              {{/each}}
            </select>
          </div>
          <div style="flex:2 1 200px;">
            <label class="muted">Name</label>
            <input type="text" name="name" placeholder="My Gutenberg" />
          </div>
          <div style="flex:3 1 260px;">
            <label class="muted">Base URL (optional)</label>
            <input type="text" name="baseUrl" placeholder="https://gutendex.com" />
          </div>
          <div>
            <button type="submit">Add</button>
          </div>
        </form>
      </div>

      <div class="card">
        <h3>Configured providers</h3>
        {{#if providers.length}}
        <table>
          <thead>
            <tr>
              <th>Name</th>
              <th>Type</th>
              <th>Enabled</th>
              <th>Base URL</th>
              <th></th>
            </tr>
          </thead>
          <tbody>
            {{#each providers}}
            <tr>
              <td>{{this.name}}</td>
              <td><span class="badge">{{this.type}}</span></td>
              <td>{{#if this.isEnabled}}Yes{{else}}No{{/if}}</td>
              <td>{{this.settings.baseUrl}}</td>
              <td>
                <form method="POST" action="/settings/providers/{{this.id}}/toggle" class="inline">
                  {{#if this.isEnabled}}
                    <input type="hidden" name="enabled" value="false" />
                    <button type="submit" class="secondary">Disable</button>
                  {{else}}
                    <input type="hidden" name="enabled" value="true" />
                    <button type="submit">Enable</button>
                  {{/if}}
                </form>
              </td>
            </tr>
            {{/each}}
          </tbody>
        </table>
        {{else}}
          <p class="muted">No providers configured yet. Add one above to start searching.</p>
        {{/if}}
      </div>

    </main>
  </body>
</html>
